<!DOCTYPE html>
<html>
	<head>
		<title>Update <%= name %></title>
		<link rel="stylesheet" href="/stylesheets/style.css" />
	</head>
	<body>
		<h1>Update <%= name %></h1>
		<form action=<%= `/store/items/${id}/update` %> method="post">
			<label for="itemName">
				Name:
				<input type="text" id="itemName" name="itemName" value=<%= name %> />
			</label>
			<label for="itemDescription">
				Description:
				<input type="text" id="itemDescription" name="itemDescription" value="<%= description %>" />
			</label>
      <label for="itemPrice">
				Price:
				<input type="number" id="itemPrice" name="itemPrice" value=<%= price %> />
			</label>
      <label for="itemInStock">
				Amount in stock:
				<input type="number" id="itemInStock" name="itemInStock" value=<%= inStock %> />
			</label>
      <label for="itemCategory">
        Category:
        <select name="itemCategory" id="itemCategory">
          <% categories.forEach((category) => { %>
            <% if (category.name === itemCategory) { %>
              <option value=<%= category.name %> selected><%= category.name %></option>
            <% } else { %>
              <option value=<%= category.name %>><%= category.name %></option>
            <% } %>
          <% }) %>
        </select>
      </label>
			<button type="submit">Submit</button>
		</form>
    <% if (errors) { %>
      <ul>
        <% errors.forEach((error) => { %>
          <li><%= error.msg %></li>
        <% }) %>
      </ul>
    <% } %>
    <a href="/store">Back to store</a>

		<script>
			const nameInput = document.getElementById('itemName');
			nameInput.addEventListener('change', (ev) => {
        // How you would add client side validation
				console.log(ev.target.value);
			});
		</script>
	</body>
</html>
